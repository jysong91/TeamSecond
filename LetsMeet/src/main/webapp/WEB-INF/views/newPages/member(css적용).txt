<%@ page session="false" contentType="text/html; charset=utf-8" pageEncoding="utf-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<!DOCTYPE html>
<html lang="ko">
  <head>
  <head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" type="text/css">
  <link rel="stylesheet" href="https://pingendo.com/assets/bootstrap/bootstrap-4.0.0-beta.1.css" type="text/css">
</head>
<c:url  var="home" value="/" />
<script src="${home }resources/js/jquery.min.js"></script>
<script type="text/javascript">
/* ajax 회원가입 유효성 확인 예시*/
// 아이디 중복확인
$(document).ready(function(){
	$("#id").blur(function(){
		var inputed = $('#id').val();
		$.ajax({
	        data : {id:inputed},
	        type : "POST",
	        url : "${home}member/idChkProc",
	        success : function(data) {
	            if(inputed=="" && data==0) {
	            	$("#idMsg").html("<p style='color:red'>아이디를 입력하세요!!</p>");
	            } else if (data == 0) {
	            	$("#idMsg").html("<p style='color:blue'>사용 가능한 아이디입니다!!</p>");
	            } else if (data == 1) {
	            	$("#idMsg").html("<p style='color:red'>아이디가 중복됩니다!!</p>");
	            } 
	        } 
	    });
	});	
	//비밀번호 안전한지 체크
	$("#pw").focusout(function(){
		$("#pwMsg").html("<p style='color:blue'>안전한 비밀번호 입니다!!</p>");
	});
	//비번체크(비밀번호부분 focusout때도 실행해야)
	//비밀번호 검사
	$("#pwOk").focusout(function(){
		var pw = $("#pw").val();
		var pwOk = $("#pwOk").val();
		$("#pwMsg").html("<p style='color:blue'>안전한 비밀번호 입니다!!</p>");
		if(pw!=pwOk){
			$('#pwOkMsg').html("<p style='color:red'>비밀번호와 비밀번호 확인이 서로 다릅니다!!</p>")
		}else{
			$('#pwOkMsg').html("<p style='color:red'>비밀번호와 비밀번호 확인이 같습니다!!</p>")
		}
	});
	//이메일 체크
	$("#email").blur(function(){
		var email = $("#email").val();
		if(validateEmail(email)){
			$("#emailMsg").html("<p style='color:blue'>이메일 사용 할 수 있습니다</p>");
			//인증번호 보내기
			$("#authSendBtn").click(function(){
				var email = $("#email").val();
				$.ajax({
					data:{email:email},
					type:"POST",
					url:"${home}member/authSendProc",
					success:function(data){
						alert(data);
						$('#emailMsg').html("<p style='color:blue'>이메일에서 인증번호를 확인하세요!</p>");
					}
				});
			});
		}else{
			$("#emailMsg").html("<p style='color:red'>이메일 사용 할 수 없습니다</p>");
		}
	});
	
	//이메일 유효성 검사
	function validateEmail(email){
		var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
		return re.test(email);
	}
	
	//인증번호 검사
	$("#authNum").blur(function(){
		var authNum = $("#authNum").val();
		if(authNum==""){
			$('#authMsg').html("<p style='color:red'>인증번호를 전송하세요!!</p>");
		}else{
			$.ajax({
				data:{authNum:authNum},
				type:"POST",
				url:"${home}member/authChkProc",
				success:function(data){
					if(data==0){
						$('#authMsg').html("<p style='color:blue'>인증 성공했습니다!!</p>");
					}else if(data==1){
						$('#authMsg').html("<p style='color:red'>인증 실패했습니다!!</p>");					
					}
				}
			});
		}
	});
	//회원가입 클릭 시 무엇이 누락되어 있는지 표시
	$("#frm").submit(function(){
		var id = $("#id").val();
		var pw = $("#pw").val();
		var email = $("#email").val();
		if(id=="" && pw=="" && email==""){
			$("#idMsg").html("<p style='color:red'>아이디를 입력하세요!!</p>");
			$("#pwMsg").html("<p style='color:red'>비밀번호를 입력하세요!!</p>");
			$("#emailMsg").html("<p style='color:red'>이메일을 입력하세요!!</p>");
			return false;
		}else if(id=="" && pw=="" ){
			$("#idMsg").html("<p style='color:red'>아이디를 입력하세요!!</p>");
			$("#pwMsg").html("<p style='color:red'>비밀번호를 입력하세요!!</p>");
			return false;
		}else if(id=="" && email=="" ){
			$("#idMsg").html("<p style='color:red'>아이디를 입력하세요!!</p>");
			$("#emailMsg").html("<p style='color:red'>이메일을 입력하세요!!</p>");
			return false;
		}else if(pw=="" && email==""){
			$("#pwMsg").html("<p style='color:red'>비밀번호를 입력하세요!!</p>");
			$("#emailMsg").html("<p style='color:red'>이메일을 입력하세요!!</p>");
			return false;
		}else if(id==""){
			$("#idMsg").html("<p style='color:red'>아이디를 입력하세요!!</p>");
			return false;
		}else if(pw==""){
			$("#pwMsg").html("<p style='color:red'>비밀번호를 입력하세요!!</p>");
			return false;
		}else if(email==""){
			$("#emailMsg").html("<p style='color:red'>이메일을 입력하세요!!</p>");
			return false;
		}
		return true;
	});
});

</script>
<body>
  <nav class="navbar navbar-expand-md bg-secondary navbar-dark sticky-top">
    <div class="container">
      <a class="navbar-brand" href="${home }">Yahmanaza</a>
      <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"> <span class="navbar-toggler-icon"></span> </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item">
            <a class="nav-link" href="${home }about">About</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">How about here?</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Come with us</a>
          </li>
          <li class="nav-item">
            <a class="nav-link text-white" href="${home }member">회원가입</a>
          </li>
        </ul>
        <form class="form-inline m-0">
          <input class="form-control mr-2" type="text" placeholder="Search">
          <button class="btn btn-primary" type="submit">검 색</button>
        </form>
      </div>
    </div>
  </nav>
  <body data-genuitec-lp-enabled="false" data-genuitec-file-id="wc3-10" data-genuitec-path="/homepage/WebContent/member.html">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" type="text/css">
  <link rel="stylesheet" href="https://pingendo.com/assets/bootstrap/bootstrap-4.0.0-beta.1.css" type="text/css">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
  <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
  <script src="http://code.jquery.com/jquery-3.2.1.js" integrity="sha256-DZAnKJ/6XZ9si04Hgrsxu/8s717jcIzLy3oi35EouyE=" crossorigin="anonymous"></script>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">
  <!-- Bootstrap core CSS -->
  <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <!-- Custom fonts for this template -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Josefin+Slab:100,300,400,600,700,100italic,300italic,400italic,600italic,700italic" rel="stylesheet" type="text/css">
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
  <title>회원가입 페이지</title>
  <!-- Bootstrap -->
  <link href="css/bootstrap.min.css" rel="stylesheet">
  <!-- font awesome -->
  <link rel="stylesheet" href="css/font-awesome.min.css" media="screen" title="no title" charset="utf-8">
  <!-- Custom style -->
  <link rel="stylesheet" href="css/style.css" media="screen" title="no title" charset="utf-8">
  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  <script>
    "undefined"==typeof CODE_LIVE&&(!function(e){var t={nonSecure:"60974",secure:"60983"},c={nonSecure:"http://",secure:"https://"},r={nonSecure:"127.0.0.1",secure:"gapdebug.local.genuitec.com"},n="https:"===window.location.protocol?"secure":"nonSecure";script=e.createElement("script"),script.type="text/javascript",script.async=!0,script.src=c[n]+r[n]+":"+t[n]+"/codelive-assets/bundle.js",e.getElementsByTagName("head")[0].appendChild(script)}(document),CODE_LIVE=!0);
  </script>
  <article class="container" data-genuitec-lp-enabled="false" data-genuitec-file-id="wc3-10" data-genuitec-path="/homepage/WebContent/member.html">
    <div class="page-header">
      <h1>회원가입 </h1>
    </div>
    <div class="col-md-6 col-md-offset-3">
    <form id="frm" action="${home }member/memberProc" method="post">
        <div class="form-group"> <label for="id">아이디</label>
       <input type="id" class="form-control" id="id" placeholder="Id확인">
       <td><p id="idMsg"></p></td> </div>
        <div class="form-group"> <label for="pw">패스워드</label>
          <input type="password" class="form-control" id="pw" placeholder="pw확인"> 
          <td><p id="pwMsg"></p></td></div>
        <div class="form-group"> <label for="pwOk">패스워드 확인</label>
          <input type="password" class="form-control" id="pwOk" placeholder="pw확인"> 
          <td><p id="pwOkMsg"></p></td></div>
        <div class="form-group"> <label for="email">Email</label>
          <div class="input-group">
            <input type="text" class="form-control" id="email" placeholder="EMail"> <span class="input-group-btn">
                  <button class="btn btn-success" id="authSendBtn">인증번호 확인</button>
                </span> <td><p id="emailMsg"></p></td></div>
       
          <div class="form-group"> <label for="authNum">인증번호</label>
          <input type="text" class="form-control" id="authNum" placeholder="인증번호를 확인해주세요."> 
          <td><p id="authMsg"></p></td></div>
       
          <div class="form-group text-center">
          <button type="submit" class="btn btn-info">회원가입<i class="fa fa-check spaceLeft"></i></button>
          <button type="submit" class="btn btn-warning">가입취소<i class="fa fa-times spaceLeft"></i></button>
</div>
<!--  
<body>
<form id="frm" action="${home }member/memberProc" method="post">
<table>
	<tr>
		<td align='right' height=40 >아이디</td>
		<td>
			<input type="text" name="id" id="id" placeholder='id 입력'/> 
		</td>
		<td><p id="idMsg"></p></td>
	</tr>
	<tr>
		<td align='right' height=40>패스워드</td>
		<td>
			<input type="password" name='pw' id="pw" placeholder='pw 입력'/> 
		</td>
		<td><p id="pwMsg"></p></td>
	</tr>
	
	<tr>
		<td align='right'>패스워드 확인</td>
		<td>
			<input type="password" name='pwOk' id="pwOk" placeholder='pw 입력'/> 
		</td>
		<td><p id="pwOkMsg"></p></td>
	</tr>
	<tr>
		<td align='right' height=40>E-Mail</td>
		<td>
			<input type="text" name='email' id="email" placeholder='E-Mail 입력'/> 
		</td>
		<td colspan="2"><input type="button" id="authSendBtn" value="인증번호 받기"/></td>
		<td><p id="emailMsg"></p></td>
	</tr>
	<tr>
		<td align='right'>인증번호</td>
		<td>
			<input type="text" name='authNum' id="authNum" placeholder='인증번호 입력'/> 
		</td>
		<td><p id="authMsg"></p></td>
	</tr>
	<tr>
		<td><input type="submit" value="회원가입"></td>
	</tr>-->
</table>
</form>
</body>
</html>
